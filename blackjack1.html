<meta charset="utf-8">
<script>
function getRandomInt(min, max) {
     return Math.floor((Math.random() * (max - min + 1)) + min);
}
function getCard() {
     var cards = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A']; 
     return cards[getRandomInt(0, cards.length-1)];
}
function getSum(hand) {
	    var sum = 0;
	for (var i=0; i<hand.length; i++) {
        var card = hand[i];
        if (card != 'A') {
            if (card == 'J' || card == 'Q' || card == 'K') {
     	        sum = sum + 10;
            } else {
                sum = sum + parseInt(card);
            }
        }        
    }
    for (var i=0; i<hand.length; i++) {
        var card = hand[i];
        if (card == "A") {
            if (sum > 10) {
                sum = sum + 1;
            } else {
                sum = sum + 11;
            }
        }
    }
    return sum;
}
function getStatus() {
    return ('Дилер: ' + dealer.join(' ') + ' Игрок: ' + player.join(' ') + '.');
}
alert('Приветствую тебя игрок');
var a = prompt('Как тебя зовут?');
var b = prompt(a + ' давай сыграем в блэк джек?(да или нет)');
if (b == "да" ) { 
			  alert("сдаю");
     do {
        var dealer = [getCard()];
        var player = [getCard(), getCard()];
        var answer = '';
            do {   
                answer = prompt(getStatus() + '\n Хотите еще карту? 1 - да, иначе - нет');
                if (answer == '1') {
                    player.push(getCard());
                    if (getSum(player) >= 22 ){
                        alert('перебор');
                        break;
                    }  
                    if (getSum(player) == 21){
                        alert('Блэк Джек!!! Ты выиграл!!!!');
                        break;
                    }
                 }

            } while(answer == '1')

         if (getSum(player) < 21)  {
                 do {
                    dealer.push(getCard());
                    if (getSum(dealer) == 21 || getSum(dealer) > getSum(player)) {
                        alert('Дилер выиграл');
                        break;}
                    if (getSum(dealer) >= 22){
                           alert('У диллера перебор вы выиграли!!!');
                        break;
                    }
                   alert(getStatus());
            } while(getSum(dealer) <= 16)
        } 
        if (getSum(dealer) == getSum(player)) {
            alert('Нечья победила дружба!!');
                  } 
        if (getSum(dealer) < getSum(player) && getSum(player) < 21) {
            alert('Ты выиграл!');
                  }     
        alert(getStatus());
        alert('Текущая сумма карт у диллера: ' + getSum(dealer) + ' у игрока: ' + getSum(player));
       
    } while (prompt('Ещё разок?(да или нет)') != 'нет')
alert('До скорых встреч')
} else {
     alert("пока");
     
      }
</script>

